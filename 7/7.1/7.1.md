# 7.1. Creación de Tablas
# Módulo de Gestión de Incidentes y Accidentes (HSE)
Para la creación de las tablas de este módulo, me basé en el modelo lógico que se había desarrollado previamente. Identifiqué las tablas principales relacionadas con el proceso de gestión de eventos HSE, acciones correctivas y verificaciones: `EventoHSE`, `AccionCorrectiva`, `VerificacionAccionesCorrectivas`, `DecisionAccionesCorrectivas`, `ReporteIncidencia`, `ArchivoReporte`, y las tablas auxiliares de categorización como `TAB1`, `TAB2`, `TAB3`, `TAB23`, `TAB24`, `TAB25`, y `TAB26`.
Durante el proceso de creación de estas tablas, realicé las siguientes modificaciones y ajustes:
## Orden de creación de las tablas
Primero ajusté el orden de creación para evitar errores con las referencias de claves foráneas. Me aseguré de que las tablas de referencia como `TAB1` (roles de usuario), `TAB2` (estado de usuario), `TAB3` (tipos de incidencia), `TAB23` (estado de decisión de acción correctiva), `TAB24` (acciones correctivas), `TAB25` (gravedad de la incidencia), y `TAB26` (niveles de severidad) estuvieran creadas antes de las tablas que dependían de ellas, como `Usuario`, `EventoHSE`, `AccionCorrectiva`, `VerificacionAccionesCorrectivas`, `DecisionAccionesCorrectivas`, `ReporteIncidencia` y `ArchivoReporte`. Esto aseguró que las claves foráneas estuvieran correctamente enlazadas.
## Revisión y ajuste de relaciones de claves foráneas
Verifiqué que cada tabla tuviera bien definidas sus relaciones. Por ejemplo:
- La tabla `EventoHSE` referencia correctamente a `Usuario` mediante la clave foránea `idUsuario`, y a los catálogos `TAB3` (tipo de evento) y `TAB23` (estado del evento).
- La tabla `AccionCorrectiva` referencia correctamente a `EventoHSE` y también a `TAB24` (estado de la acción correctiva).
- La tabla `VerificacionAccionesCorrectivas` se conecta con `AccionCorrectiva` y `Usuario`.
- La tabla `DecisionAccionesCorrectivas` está vinculada con `EventoHSE` y `VerificacionAccionesCorrectivas`, con un estado y decisión referenciados a `TAB23` y `TAB24` respectivamente.
- Las tablas de reporte, como `ReporteIncidencia` y `ArchivoReporte`, están correctamente referenciadas a sus respectivos catálogos `TAB25` y `TAB26`.
Esto permitió garantizar que las claves foráneas estuvieran correctamente enlazadas y que la integridad referencial fuera respetada.
## Ajustes en tipos de datos
Revisé los tipos de datos y, cuando fue necesario, realicé ajustes. Algunos de los cambios realizados fueron:
- Utilicé el tipo `CHAR(3)` para códigos estándar (como tipo de evento, estado de usuario, etc.), asegurando que las claves de los catálogos sean de longitud fija y eficiente.
- Utilicé `VARCHAR` y `TEXT` para almacenar descripciones más largas, como en los campos `descripcion` de las tablas `EventoHSE`, `AccionCorrectiva`, `DecisionAccionesCorrectivas`, entre otras.
- Para los identificadores únicos, utilicé `CHAR(8)` o `CHAR(10)`, de acuerdo con las necesidades del sistema.
- Utilicé el tipo `DATE` para las fechas de registro y eventos, asegurando compatibilidad con funciones de fecha en PostgreSQL.
## Definición de Constraints
Aseguré que todas las tablas tuvieran claves primarias (`PRIMARY KEY`) y que las claves foráneas (`FOREIGN KEY`) estuvieran correctamente definidas para mantener la integridad referencial y evitar la inserción de datos inconsistentes. Por ejemplo:
- Cada tabla principal (`EventoHSE`, `AccionCorrectiva`, etc.) tiene su respectiva clave primaria que garantiza la unicidad de cada registro.
- Las relaciones entre las tablas están definidas mediante claves foráneas que aseguran que los registros relacionados existan.
## Convención de Nombres
Por último, ajusté los nombres de las columnas y me aseguré de que hubiera consistencia en el esquema de nombres a lo largo de todas las tablas. Esto incluye:
- Nombres de columnas con prefijos coherentes, como `idUsuario`, `idEvento`, `idAccion`, etc., para los identificadores.
- Nombres descriptivos y consistentes en las columnas de las tablas de referencia, como `codigo`, `descripcion`, etc.
- Utilización de `snake_case` para los nombres de las columnas y tablas, lo que mejora la legibilidad y mantenimiento del código.
Este enfoque asegura que el **Módulo de Gestión de Incidentes y Accidentes (HSE)** sea robusto, eficiente y fácil de mantener a medida que se agreguen nuevas funcionalidades o se modifiquen las existentes.

Sample content for section 7.1.